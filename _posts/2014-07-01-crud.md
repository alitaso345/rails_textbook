---
layout: post
unique_identifier:
 - 'http:/example.jp/bookid_in_url'
 - 'BookID'
 - 'URL'
title: 'CRUD基礎'
creator: 'igaiga'
date: '2014-07-01'
categories:
---

# CRUD基礎

Webアプリには基本となる4つの機能があります。ページの新規作成(Create)、表示(Read)、更新(Update)、削除(Destroy)です。それぞれの頭文字を取ってCRUDと呼ばれています。大きなWebアプリも、このCRUDを基礎として作られます。

ここではCRUD機能を持ったRailsアプリを作り、その動作について解説します。

## CRUD基礎

### アプリの作成

今回も最初にアプリを作ります。本のタイトルとメモを管理する簡易なアプリです。以前の章で作成した ```my_web_apps``` フォルダの下に新しいアプリを作ります。ターミナルを起動して以下のコマンドを打ちます。

{% highlight bash %}
cd my_web_apps
rails new books_app
{% endhighlight %}

{% highlight console %}
$ rails new books_app
      create
... (略)
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.
         run  bundle exec spring binstub --all
* bin/rake: spring inserted
* bin/rails: spring inserted
{% endhighlight %}

次に、以下のコマンドを実行します。

{% highlight bash %}
cd books_app
rails g scaffold books title:string memo:text
bin/rake db:migrate
rails s
{% endhighlight %}
{% highlight console %}
$ rails g scaffold books title:string memo:text
Plural version of the model detected, using singularized version. Override with --force-plural.
      invoke  active_record
      create    db/migrate/20140616231027_create_books.rb
      create    app/models/book.rb
...
      invoke  scss
      create    app/assets/stylesheets/scaffolds.css.scss 

$ bin/rake db:migrate
== 20140616231027 CreateBooks: migrating ======================================
-- create_table(:books)
   -> 0.0013s
== 20140616231027 CreateBooks: migrated (0.0014s) =============================

$ rails s
=> Booting WEBrick
=> Rails 4.1.1 application starting in development on http://0.0.0.0:3000
=> Run `rails server -h` for more startup options
=> Notice: server is listening on all interfaces (0.0.0.0). Consider using 127.0.0.1 (--binding option)
=> Ctrl-C to shutdown server
[2014-06-17 08:11:49] INFO  WEBrick 1.3.1
[2014-06-17 08:11:49] INFO  ruby 2.1.2 (2014-05-08) [x86_64-darwin13.0]
[2014-06-17 08:11:49] INFO  WEBrick::HTTPServer#start: pid=4825 port=3000
{% endhighlight %}

ブラウザを起動して以下のURLを入力してアクセスしてみます。

* http://localhost:3000/books

{% image path: assets/crud/index_page.png, description: 起動した画面 %}

こんな画面が表示されましたでしょうか。ここから、New Book リンクをクリックして先へ進み、title欄とmemo欄を記入し Create Book ボタンを押してみてください。

{% image path: assets/crud/created_page.png, description: データを入力してCreate Bookボタン %}

ここからBackボタンを押すと最初の`/books`のページに戻りますが、先ほど入力したデータが表示されていることが分かるかと思います。

{% image path: assets/crud/index_with_data_page.png.png, description: 入力したデータが表示される %}

さらにデータを追加したり、他のリンクもさわってみてください。

ここで作成したアプリはCRUDの各機能、すなわち、新規作成、表示、更新、削除を有しています。以降で、1つずつその動作を説明していきます。

### scaffoldコマンド

★ここから


### まとめ

CRUDの基礎的な内容について説明しました。ポイントをまとめると以下のようになります。

* ち
* は
* や
* ふ
* る
